<!DOCTYPE html>
<html>
<head>
	<title>PoC</title>
	<script src="node_modules/es6-module-loader/node_modules/babel-core/browser.js"></script>
	<script src="node_modules/es6-module-loader/dist/es6-module-loader-dev.js"></script>
	<script>

'use strict';

System.transpiler = 'babel';

// This mapping does not work...
System.paths[ 'ckeditor5-*' ] = 'foofoo-*';

// Remove this block and see that the paths mapping will work.
( () => {
	// Store the old normalization function.
	const systemNormalize = System.normalize;

	// Override the normalization function.
	System.normalize = function( name, parentName, parentAddress ) {
		let normalizedName = name.replace( /ckeditor5-([^\/]+)\//, 'node_modules/ckeditor5-$1/src/' );

		console.log( `\t\tname: ${ name }, normalized name: ${ normalizedName }` );

		let ret = systemNormalize.call( this, normalizedName, parentName, parentAddress );

		return ret;

		return ret.then( function( url ) {
			console.log( `\t\tnormalized name: ${ normalizedName }, resolved name: ${ url }` );

			return url;
		} );
	};
} )();

System.import( 'ckeditor.js' ).then( ( CKEDITORModule ) => {
	const CKEDITOR = CKEDITORModule.default;

	CKEDITOR.create( {
		features: [
			// 'basicstyles/bold',
			// 'basicstyles/italic',
			// 'classiccreator',
			// 'image/imagecaption',
			// 'button'
		]
	} ).then( ( editor ) => {
		// debugger;
	} );
} );

	</script>
</head>
<body>
</body>
</html>